<!DOCTYPE html>
<html>
  <head>
    <title>LivingPic</title>
    
    <!-- These metas should probably be deleted as they are handled by phonegap build -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name = "format-detection" content = "telephone=no"/>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width;" />
    
    <link rel="stylesheet" type="text/css" href="css/application.css" />
    
    <!-- Phonegap.js is included automatically by phonegap build and is different for each device. This following line tells phonegap build to include the appropriate phonegap.js. -->
    <script type="text/javascript" src="phonegap.js"></script>
       
    <!-- Put scripts here rather than in head so that document.ready fires only when all scripts have loaded. -->
    <script type="text/javascript" src="js/application.js"></script>
    <!-- index.js is now included in application.js -->
    <!-- <script type="text/javascript" src="js/index.js"></script> -->
  </head>
  
  <body> 
    <!-- BEGIN NPB TEMPLATE GENERATED CODE -->
    <script type="text/javascript" charset="utf-8">
  // $(document).ready( function () {
  //   // Config.init_app()
  //   // $.mobile.changePage("#admin")
  //   // app.initialize()
  // })
  
  function init_app() {
    console.log("Initializing mobile pages")
    handle_registration({}) 
  }
</script>
<div id="app_splash" data-role="page"  data-theme="c">
  
  <div id="splash" class="center window_height" data-role="content"  data-theme="c" >
    <div class="quarter_window_height">&nbsp;</div>
    <div style="font-size:50px; font-weight:bold">LivingPic</div>
    
    <div style="padding-top:150px; font-size:10px">
        <div style="padding-bottom:10px">
          Running app.
        </div>
        <div class="display_app_state"></div>
    </div>  
    
  </div>  
  
</div>
<script type="text/javascript" charset="utf-8">
  $("#welcome").live("pagebeforeshow", function(event,data){
    console.log("Setting current user name ");
    if (current_user().first_name) {$(".first_name").html(current_user().first_name)}
  })
</script>
<div id="welcome" data-role="page"  data-theme="c">
  
  <div data-role="header" data-theme="c"  data-id="ftui" data-position="fixed">
  <h1>LivingPic</h1>
</div>

  
  <div data-role="content" >
    <ul data-divider-theme="c" data-theme="c" data-inset="true" data-role="listview">
<li class="npb-wrap npb-medium npb-headings">

      <h1>Hello <span class="first_name"></span>,</h1>
      <p>Welcome to LivingPic!</p>
      <p>Shall we get you set up?</p>
      <div class="button_box">
        <a href="#confirm_known_user" data-role="button" data-icon="arrow-r" data-iconpos="right" data-theme="b" data-transition="slide">Set me up!</a>
      </div>
     </li>
</ul>

  </div>
  
  <script type="text/javascript" charset="utf-8">
  // See app.js for the javascript that animates this partial
</script>
<div data-role="footer" data-theme="c" data-id="ftui" data-position="fixed">
  <h3 style="font-size:10px; font-weight:normal" class="display_app_state"></h3>
  <a href="#invite" data-role="button">Invite</a>
  <a href="#estimate_population" data-role="button">Estimate Population</a>
  <div data-role="button" onclick="handle_registration({fresh:true})">Start fresh</div>
</div>

  
</div>

<script type="text/javascript" charset="utf-8">
  $("#confirm_known_user").live("pagebeforeshow", function(event, data){
    $(".current_user_fullname").html(current_user_fullname())
  })
</script>
<div id="confirm_known_user" data-role="page"  data-theme="c">
  <div data-role="header" data-theme="b"  data-id="ftui" data-position="fixed">
  <h1>LivingPic</h1>
</div>

  
  <div data-role="content" >
    
    <ul data-divider-theme="c" data-theme="c" data-inset="true" data-role="listview">
<li class="npb-wrap npb-medium npb-headings">

      <h1>Great!</h1>
      <p>So, do we have your name right?</p>
      <h3 class="center"><span class="current_user_fullname"></span></h3>
      <div class="center button_box">
        <a href="#edit_name" data-role="button" data-inline="true">no</a>
        <a href="#" data-role="button" data-inline="true" data-theme="b" data-transition="slide" onclick="confirm_name()">Yes</a>
      </div>
     </li>
</ul>

    
  </div>  
   
  <script type="text/javascript" charset="utf-8">
  // See app.js for the javascript that animates this partial
</script>
<div data-role="footer" data-theme="c" data-id="ftui" data-position="fixed">
  <h3 style="font-size:10px; font-weight:normal" class="display_app_state"></h3>
  <a href="#invite" data-role="button">Invite</a>
  <a href="#estimate_population" data-role="button">Estimate Population</a>
  <div data-role="button" onclick="handle_registration({fresh:true})">Start fresh</div>
</div>

</div>

<script type="text/javascript" charset="utf-8">
  $("#edit_name").live('pagebeforeshow', function(event, data) {
    $("#edit_first_name").val(current_user().first_name);
    $("#edit_last_name").val(current_user().last_name);
  });
</script>

<div id="edit_name" data-role="dialog"  data-theme="c">
  
  <div data-role="header" data-theme="b">
    <h1>Edit Name</h1>
  </div>  
  
  <div data-role="content" >
    <h1>Sorry about that</h1>
    Please edit
    <form id="user_name">
      <label for="first_name">First name:</label>
      <input type="text" name="first_name" id="edit_first_name" value=""  placeholder="First name"/>
      <label for="last_name">Last name:</label>
      <input type="text" name="last_name" id="edit_last_name" value=""  placeholder="Last name"/>
      <div class="button_box">
        <div data-role="button" 
              data-theme="b" 
              data-transition="slide" 
              onclick="submit_name($('#user_name').serializeArray())">Submit</div>
      </div>
    </form>
  </div>
  
  
</div>

<script type="text/javascript" charset="utf-8">
  $("#confirm_occasion").live("pagebeforeshow", function(event, datat){
    $(".current_occasion").html(current_occasion_name())
  })
</script>

<div id="confirm_occasion" data-role="page"  data-theme="c">
  <div data-role="header" data-theme="c"  data-id="ftui" data-position="fixed">
  <h1>LivingPic</h1>
</div>

  
  <div data-role="content" >
    
    <ul data-divider-theme="c" data-theme="c" data-inset="true" data-role="listview">
<li class="npb-wrap npb-medium npb-headings">

      <h1>Perfect!</h1>
      <p>And, are you at <strong><span class="current_occasion"></span></strong>?</p>
      <div class="button_box">
        <a href="#confirm_other_occasion" data-role="button" data-inline="true">no</a>
        <a href="#estimate_population" data-role="button" data-inline="true" data-theme="b" data-transition="slide">Yes</a>
      </div>
     </li>
</ul>

    
  </div>  
   
  <script type="text/javascript" charset="utf-8">
  // See app.js for the javascript that animates this partial
</script>
<div data-role="footer" data-theme="c" data-id="ftui" data-position="fixed">
  <h3 style="font-size:10px; font-weight:normal" class="display_app_state"></h3>
  <a href="#invite" data-role="button">Invite</a>
  <a href="#estimate_population" data-role="button">Estimate Population</a>
  <div data-role="button" onclick="handle_registration({fresh:true})">Start fresh</div>
</div>

</div>

<div id="confirm_other_occasion" data-role="page"  data-theme="c">
  <div data-role="header" data-theme="c"  data-id="ftui" data-position="fixed">
  <h1>LivingPic</h1>
</div>

  
  <div data-role="content" >
    
    <ul data-divider-theme="c" data-theme="c" data-inset="true" data-role="listview">
<li class="npb-wrap npb-medium npb-headings">

      <h1>Oh&hellip;</h1>
      <p>Are you at a different event or occasion where you want to take photos?</p>
      <div class="button_box">
        <a href="#app_running" data-role="button" data-inline="true" data-transition="slide">no</a>
        <a href="#enter_other_occasion" data-role="button" data-inline="true" data-theme="b">Yes</a>
      </div>
     </li>
</ul>

    
  </div>  
   
  <script type="text/javascript" charset="utf-8">
  // See app.js for the javascript that animates this partial
</script>
<div data-role="footer" data-theme="c" data-id="ftui" data-position="fixed">
  <h3 style="font-size:10px; font-weight:normal" class="display_app_state"></h3>
  <a href="#invite" data-role="button">Invite</a>
  <a href="#estimate_population" data-role="button">Estimate Population</a>
  <div data-role="button" onclick="handle_registration({fresh:true})">Start fresh</div>
</div>

</div>

<div id="enter_other_occasion" data-role="dialog"  data-theme="c">
  
  <div data-role="header" data-theme="b">
    <h1>Occasion</h1>
  </div>  
  
  <div data-role="content" >
    <h1>Excellent!</h1>
    What's the occasion?
    <form id="occasion_name">
      <label for="name">Occasion name:</label>
      <input type="text" name="name" id="occasion_name" value=""  placeholder="Name of the occasion"/>
      <div class="button_box">
        <a href="#confirm_other_occasion" data-role="button" data-inline="true" data-rel="back">Cancel</a>
        <span data-role="button" 
              data-theme="b" 
              data-transition="slide" 
              data-inline="true"
              onclick="submit_occasion_name($('#occasion_name').serializeArray())">Submit</div>
      </span>
    </form>
  </div>
  
  
</div>

<div id="estimate_population" data-role="page"  data-theme="c">
  
  <div data-role="header" data-theme="c"  data-id="ftui" data-position="fixed">
  <h1>LivingPic</h1>
</div>

  
  <div data-role="content" >
    <ul data-divider-theme="c" data-theme="c" data-inset="true" data-role="listview">
<li class="npb-wrap npb-medium npb-headings">

      <h1>Awesome!</h1>
      <p>About how many others are here too?</p>
      <div class="button_box">
        <form id="pop_estimate">
          <input type="number" name="estimate" id="estimate" value=""  placeholder="Enter a number"/>
          <div  data-role="button" 
                data-theme="b" 
                data-transition="slide" 
                onclick="submit_pop_estimate($('#pop_estimate').serializeArray())">Submit</div>
        </form>
      </div>
     </li>
</ul>

  </div>
  
  <script type="text/javascript" charset="utf-8">
  // See app.js for the javascript that animates this partial
</script>
<div data-role="footer" data-theme="c" data-id="ftui" data-position="fixed">
  <h3 style="font-size:10px; font-weight:normal" class="display_app_state"></h3>
  <a href="#invite" data-role="button">Invite</a>
  <a href="#estimate_population" data-role="button">Estimate Population</a>
  <div data-role="button" onclick="handle_registration({fresh:true})">Start fresh</div>
</div>

  
</div>

<div id="invite" class="auto_complete_page" data-role="page"  data-theme="c">
  
  <div data-role="header" data-theme="c" >
    <h1>LivingPic</h1>
  </div>
  
  <div class="ui-content">
    <div class="help"><h1>Perfect!</h1><p>Now, who do you know here? <a href="#why_invite">Why?</a></p></div>
    
    <div class="picked_items_block">
      <h2>Friends at <span class="current_occasion"></span></h2>
      
      <div style="margin: 0px -15px"> 
        <span class="auto_complete_picked_items_box"></span>
        <span onclick="invite_done()" data-role="button" data-inline="true" data-mini="true" data-theme="b">Done</span>
      </div> 
    </div>
  
    <div id="search_block">
      <div class="ui-listview-filter ui-bar-c" >
  <div class="ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield ui-body-c">
    <input class="auto_complete_search_input_field ui-input-text ui-body-c" data-role="none" placeholder="Type a name">
    <a class="ui-input-clear ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all ui-fullsize ui-btn-icon-notext ui-input-clear-hidden" title="clear text" href="#">
      <span class="ui-btn-inner ui-btn-corner-all ">
        <span class="ui-btn-text">clear text</span>
        <span class="ui-icon ui-icon-delete ui-icon-shadow"> </span>
      </span>        
    </a>
  </div>
</div>

    </div> 
    
    <ul class="auto_complete_search_results_box ui-listview" style="height:200px; overflow:scroll"></ul>
    
      
  </div>
    
</div>

<script type="text/javascript" charset="utf-8">
  // See invite_page.js for js that animates this page...
</script>


<div id="why_invite" data-role="dialog"  data-theme="c">
  
  <div data-role="header" data-theme="b">
    <h1>Why?</h1>
  </div>  
  
  <div data-role="content" >
    <h2>What does LivingPic do with this?</h2>
    <p>Your <strong>LivingPic</strong> app shows you beautiful Living Photo Albums of the occasions you were at. These Living Albums are tailored specifically to you.</p>
    <p>When you tell your app who you know at an event or occasion it invites them to participate and lets you see pictures of them and by them at the occasion you were at together.</p>
    <div class="button_box">
      <a href="#invite" data-role="button" data-inline="true" data-theme="b">OK</a>
    </div>
  </div>
  
  
</div>

<div id="no_invite" data-role="dialog"  data-theme="c">
  
  <div data-role="header" data-theme="b">
    <h1>Sorry</h1>
  </div>  
  
  <div data-role="content" >
    <h2>Sorry you're not participating.</h2>
    <p>Benefits of joining in&hellip;</p>
    <ul>
      <li>Photos are better when shared.</li>
      <li>A collaborative album is much more fun.</li>
      <li>Your pics effortlessly organized and preserved.</li>
    </ul>
    <div class="button_box">
      <a href="#confirm_invite" data-role="button" data-inline="true" data-theme="b">OK</a>
    </div>
  </div>
  
  
</div>

<div id="confirm_invite" data-role="page"  data-theme="c">
  <div data-role="header" data-theme="b"  data-id="ftui" data-position="fixed">
  <h1>LivingPic</h1>
</div>

  
  <div data-role="content" >
    
    <ul data-divider-theme="c" data-theme="c" data-inset="true" data-role="listview">
<li class="npb-wrap npb-medium npb-headings">

      <h1>Excellent!</h1>
      <p>Is it ok for <strong><span class="invitees"></span></strong> to see your pics of <strong><span class="current_occasion"></span></strong> and vice versa? <a href="#confirm_invite_details">Details&hellip;</a></p>
      <div class="button_box">
        <a href="#no_invite" data-role="button" data-inline="true">no</a>
        <a href="#what_next" data-role="button" data-inline="true" data-theme="b" data-transition="slide">Sure!</a>
      </div>
     </li>
</ul>

    
  </div>  
   
  <script type="text/javascript" charset="utf-8">
  // See app.js for the javascript that animates this partial
</script>
<div data-role="footer" data-theme="c" data-id="ftui" data-position="fixed">
  <h3 style="font-size:10px; font-weight:normal" class="display_app_state"></h3>
  <a href="#invite" data-role="button">Invite</a>
  <a href="#estimate_population" data-role="button">Estimate Population</a>
  <div data-role="button" onclick="handle_registration({fresh:true})">Start fresh</div>
</div>

</div>

<div id="confirm_invite_details" data-role="dialog"  data-theme="c">
  
  <div data-role="header" data-theme="b">
    <h1>Details</h1>
  </div>  
  
  <div data-role="content" >
    <h1>What does this mean?</h1>
    <p>Your <strong>LivingPic</strong> app lets you contribute to a collaborative album of <strong><span class="current_occasion"></span>
</strong> so people you know here can see photos you have snapped and vice versa.</p> 
    <p>Saying yes will invite <strong><span class="invitees"></span></strong> to participate with you in contributing to this album.</p> 
    <p>Saying yes means that you want to join in the fun of contributing to and enjoying a <em>Living Photo Album</em> of <strong><span class="current_occasion"></span></strong>.</p>
    <div class="button_box">
      <a href="#invite" data-role="button" data-inline="true" data-theme="b">OK</a>
    </div>
  </div>
  
  
</div>

<div id="what_next" data-role="page"  data-theme="c">
  <div data-role="header" data-theme="b"  data-id="ftui" data-position="fixed">
  <h1>LivingPic</h1>
</div>

  
  <div data-role="content" >
    
    <ul data-divider-theme="c" data-theme="c" data-inset="true" data-role="listview">
<li class="npb-wrap npb-medium npb-headings">

      <h1>You are all set up!</h1>
      <p>What would you like to do now?</p>
      <div class="button_box">
        <a class="j_camera_trigger" href="#tag_pic" data-theme="b" data-role="button" data-inline="false" data-mini="true" data-transition="slide">Take a photo!</a>
        <a href="#app_running" data-role="button" data-inline="false" data-theme="b" data-transition="slide" data-mini="true">See pics of <span class="current_occasion"></span>!</a>
      </div>
     </li>
</ul>

    
  </div>  
   
  <script type="text/javascript" charset="utf-8">
  // See app.js for the javascript that animates this partial
</script>
<div data-role="footer" data-theme="c" data-id="ftui" data-position="fixed">
  <h3 style="font-size:10px; font-weight:normal" class="display_app_state"></h3>
  <a href="#invite" data-role="button">Invite</a>
  <a href="#estimate_population" data-role="button">Estimate Population</a>
  <div data-role="button" onclick="handle_registration({fresh:true})">Start fresh</div>
</div>

</div>

<div id="tag_pic" class="auto_complete_page"  data-role="page"  data-theme="a" style="background-image:url(/assets/pic1.jpg); background-size: cover; background-repeat:no-repeat; background-position:center">
  
  <div class="ui-content" style="background:#333; opacity:0.85">
    
    <div class="help"><h2>Who is in this photo?</h2></div>

    <div class="picked_items_block">
      <h2>In this photo <span class="current_occasion"></span></h2>

      <div style="margin: 0px -15px"> 
        <span class="auto_complete_picked_items_box"></span>
        <span onclick="tag_done()" data-role="button" data-inline="true" data-mini="true" data-theme="b">Done</span>
      </div> 
    </div>

    <div id="search_block">
      <div class="ui-listview-filter ui-bar-a" >
  <div class="ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield ui-body-a">
    <input class="auto_complete_search_input_field ui-input-text ui-body-a" data-role="none" placeholder="Type a name">
    <a class="ui-input-clear ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all ui-fullsize ui-btn-icon-notext ui-input-clear-hidden" title="clear text" href="#">
      <span class="ui-btn-inner ui-btn-corner-all ">
        <span class="ui-btn-text">clear text</span>
        <span class="ui-icon ui-icon-delete ui-icon-shadow"> </span>
      </span>        
    </a>
  </div>
</div>

    </div> 

    <ul class="auto_complete_search_results_box ui-listview" style="height:200px; overflow:scroll"></ul>


  </div>  
   
</div>

<div id="app_running" data-role="page"  data-theme="a">
  <div data-role="header" data-theme="a"  data-id="ftui" data-position="fixed">
  <h1>LivingPic</h1>
</div>

  
  <div data-role="content"  data-theme="a" >
    <h1>Registered User App Running</h1>
    This where the user goes when he has completed the registration flow or if he was previously registered. We probably need to work out the following Scenarios.
    <h2>FTUI</h2>
    <h3>At existing event</h3>
    <ul>
      <li>Confirm event and size</li>
      <li>Invite others</li>
      <li>Take and tag first pic</li>
      <li>See pics of others</li>
    </ul>
    
    <h3>Not at an existing event</h3>
    (note this is probably not critical for early testing leave this one out?)
    <ul>
      <li>Take and tag pic</li>
      <li>Create an event</li>
    </ul>
  </div>  
  
  <script type="text/javascript" charset="utf-8">
  // See app.js for the javascript that animates this partial
</script>
<div data-role="footer" data-theme="a" data-id="ftui" data-position="fixed">
  <h3 style="font-size:10px; font-weight:normal" class="display_app_state"></h3>
  <a href="#invite" data-role="button">Invite</a>
  <a href="#estimate_population" data-role="button">Estimate Population</a>
  <div data-role="button" onclick="handle_registration({fresh:true})">Start fresh</div>
</div>

</div>

<div id="occasions" data-role="page" data-theme="a">
  
  <div data-role="header" data-position="fixed">
    <h1>My Occasions</h1>
    <a class="npb-img-button ui-btn-right" href="#" data-mini="true" data-theme="b"><img alt="Camera" src="/assets/camera.png" style="height:22px" /></a>

  </div>
  
  <div data-role="content">
  </div>
  
</div>
<div id="gallery" data-role="page" data-theme="a" >
  <div data-role="header" data-position="fixed">
    <a href="#occasions" data-mini="true" data-role="button" data-icon="back">All</a>
  	<h1 class="npb-has-subheading">
  	 <span class="occasion_name"></span>
  	 <p class="npb-sub-heading">
       <span class='occasion_city de-emphasize1'></span> &nbsp; 
       <span class='occasion_date de-emphasize2'></span>
     </p>
    </h1>
  	<a class="npb-img-button ui-btn-right" href="#" data-mini="true" data-theme="b"><img alt="Camera" src="/assets/camera.png" style="height:22px" /></a>

  </div>
  <div class="content"></div>
</div>
<div id="admin" data-role="page"  data-theme="c">

  <div data-role="header" data-theme="c"  data-id="ftui" data-position="fixed">
  <h1>LivingPic</h1>
</div>


  <div data-role="content" >
    <h3>Client</h3>
    <span class="client small"></span>
    
    <h3>Server</h3>
    <p class="small">
      <strong>Host:</strong> &nbsp; <span class="current_host"></span><br/> 
      <strong>Http_x_forwarded_host:</strong> &nbsp; <span class="current_forwarded_host"></span><br/>
      <strong>Status: <span class="host_status"></span></strong>
    </p>
    
    
    <div data-role="fieldcontain">
       <label for="host_select" class="select">Change Server:</label>
       <select name="host_select" id="host_select" data-mini="true">
       </select>
    </div>
        
    
  </div>

  <script type="text/javascript" charset="utf-8">
  // See app.js for the javascript that animates this partial
</script>
<div data-role="footer" data-theme="c" data-id="ftui" data-position="fixed">
  <h3 style="font-size:10px; font-weight:normal" class="display_app_state"></h3>
  <a href="#invite" data-role="button">Invite</a>
  <a href="#estimate_population" data-role="button">Estimate Population</a>
  <div data-role="button" onclick="handle_registration({fresh:true})">Start fresh</div>
</div>


</div>
  


    <!-- END NPB TEMPLATE GENERATED CODE -->
  </body>
</html>